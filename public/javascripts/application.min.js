/* Copyright (C) 2010 Jimmy Dee */
;(function($){ var $a; var $b; var $c; var $d =''; var $e = $('#error'); var $f = $('#header'); var $g = $('#main'); var $h = $f.outerHeight(); var $i = $h; function $j(){ $g.stop().animate({ top: '22.8ex' }, 'fast'); $e.stop().replaceWith('<div id="error" class="ui-state-highlight ui-corner-all"><span class="ui-icon ui-icon-info"></span>working...</div>'); } function $k() { var a = $.find_cookie('dubsar_starting_pane'); if (!a || $('#' + a).size() == 0 || ! $('#' + a + '+ div').attr('id')) { $l(''); return 0; } else { var b = $.find_cookie('dubsar_starting_offset'); if (b) $('#main').scrollTop(b); return $('#' + a + '+ div').attr('id').match(/_(\d+)$/)[1] - 0; } } function $l(a) { document.cookie = 'dubsar_starting_pane='+a; if (a) { var b = $('#main').scrollTop() + $('#' + a).position().top; document.cookie = 'dubsar_starting_offset='+b; } } function $m(a) { $('body').removeClass('style-light style-dark').addClass('style-'+a); document.cookie = 'dubsar_theme='+a+'; max-age='+30*86400+'; path=/'; } function $n(a,b){ if (b.item) { $b.val($(b.item).val()); $('#word-submit').click(); } } function $o(){ $a = new Array(); $c = $b.val(); } function $p(){ $c = null; } function $q(a,b,c){ a.term += '%'; if (c) { a.page = c; } if ($d ) { a['case'] = $d ; } $.getJSON('/.json', a, function(d){ if (d.term == $c && d['case'] == $d ) { for (var j=0; j<d.list.length; ++j) $a.push(d.list[j]); b($a); if (!d.next_page || !d.total || d.next_page > d.total) return; a.term = $c; $q(a, b, d.next_page); } }); } (function register_autocomplete(a) { $b = $('#word-input').autocomplete({ close :$p, search:$o, select:$n, source:a }); })($q); $.find_cookie = function(a){ var b = document.cookie; var c = b.indexOf(a); if (c != -1) { var d = c + a.length + 1; var e = b.indexOf(';', d); if (e == -1) { e = b.length; } return decodeURIComponent(b.substring(d, e)); } else { return ''; } }; $(':submit').button({ icons: { primary:'ui-icon-search' } }); $('.pagination a').addClass('search-link'); $('.search-link').click($j); $e.filter(':visible').each(function(){ $i = $(this).position().bottom; }); $g.css({ top: $i }); $e.filter(':visible').delay(3000).fadeOut('slow', function(){ $g.animate({ top: $h }, 1000, 'easeOutBounce'); }); $('#accordion').accordion({ active: $k(), autoHeight: false, change: function(a, b) { $l(b.newHeader.attr('id')); }, navigation: true }); $('#word-case').button({ icons:{ secondary: 'ui-icon-arrowthick-1-e' } }).click(function(){ $a = new Array(); if ($(this).is(':checked')) { $d  = $(this).val(); } else { $d  = ''; } }); $('#word-lookup-buttonset').buttonset(); $b.watermark('enter a word'); $('#theme-picker-buttonset > input').button().click(function(){ var a = $(this).val(); $m(a); $('label#'+a+'-other').removeClass('ui-state-active'); $('#dark-other').addClass('ui-corner-left'); $('#light-other').addClass('ui-corner-right'); }); $('#theme-picker-buttonset').buttonset(); $('#theme-picker-buttonset > input:checked').click(); $('.small-buttonset span > span').unwrap(); })(jQuery);
